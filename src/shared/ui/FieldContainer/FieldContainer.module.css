.field-spacing-x {
    @apply px-3;
}

.field {
    @apply relative;
    &__container {
        @apply relative flex items-center;
    }
    &__label {
        @apply pointer-events-none absolute left-3 top-1/2 max-w-[calc(100%-theme(space.6))] origin-top-left -translate-y-1/2 transform truncate leading-tight text-n-4 transition dark:text-n-5;
        transition-property: color, transform, max-width;
        transition-delay: 0s, 0s, 0.01s;
    }
    input {
        @apply field-spacing-x relative block h-12 w-full resize-none rounded-inherit border-none bg-transparent leading-tight text-foreground outline-none transition dark:text-white;
        &:-webkit-autofill,
        &-internal-autofill-selected {
            background-color: transparent !important;
            box-shadow: inset 0 0 0 28px theme('colors.foreground') !important;
            -webkit-box-shadow: inset 0 0 0 28px theme('colors.foreground') !important;
            -webkit-text-fill-color: theme('colors.black');
            caret-color: theme('colors.black');
            z-index: 0 !important;
        }
        &::-webkit-outer-spin-button,
        &::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        &[type='number'] {
            -moz-appearance: textfield;
        }
    }
    &__side {
        @apply absolute text-n-5 dark:text-n-5;
        &_prefix {
            @apply left-3;
            & ~ input {
                @apply pl-12;
            }
        }
        &_suffix {
            @apply right-3;
            & ~ input {
                @apply pr-12;
            }
            & ~ .field__label {
                @apply pr-9;
            }
        }
    }
    &__error {
        @apply absolute left-1 top-full text-[11px] leading-tight text-danger;
    }
}

.field-side {
    @apply flex max-h-12 w-6 items-center truncate;
}

/* COMMON STATES */
.field.is-focused {
    .field__label {
        @apply text-primary;
    }
}
.field.is-error {
    .field__label {
        @apply text-danger;
    }
}

/* VIEW FILLED */
.field_filled {
    .field__container {
        @apply rounded-lg bg-n-1 before:absolute before:inset-0 before:block before:rounded-inherit before:border before:border-transparent before:transition dark:bg-n-8;
    }
    input {
        @apply pb-1 pt-3.5;
    }
    .field__side {
        @apply max-h-6;
        &_prefix {
            @apply translate-y-1;
        }
    }
}
.field_filled.is-filled,
.field_filled.is-focused {
    .field__label {
        @apply max-w-[calc(125%-theme(space.6))] -translate-y-[20px] scale-75;
    }
}
.field_filled.is-focused {
    .field__container {
        @apply before:border-primary before:opacity-100;
    }
}
.field_filled.is-error {
    .field__container {
        @apply before:border-danger;
    }
}
.field_filled.is-disabled {
    .field__label {
        @apply text-n-3;
    }
    .field__side {
        @apply text-n-3/90;
    }
    input {
        @apply text-n-3;
    }
}

/* VIEW OUTLINED */
.field_outlined {
    .field__fieldset {
        @apply field-spacing-x absolute inset-0 min-w-0 rounded-lg border border-n-3 transition dark:border-n-6;
        transition-property: border;
    }
    .field__legend {
        @apply invisible -mx-1 block h-0 max-w-[0.01px] text-xs transition;
        transition-property: max-width, padding;
    }
    .field__legend-text {
        @apply inline-block -translate-y-1/2 truncate whitespace-nowrap px-1 tracking-tight;
    }
}
.field_outlined.is-filled,
.field_outlined.is-focused {
    .field__legend {
        @apply w-auto max-w-full;
    }
    .field__label {
        @apply max-w-[calc(125%-theme(space.6))] -translate-y-[32px] scale-75;
    }
}
.field_outlined.is-focused {
    .field__fieldset {
        @apply border-primary;
    }
}
.field_outlined.is-error {
    .field__fieldset {
        @apply border-danger;
    }
}
.field_outlined.is-disabled {
    .field__fieldset {
        @apply border-n-2;
    }
    .field__label {
        @apply text-n-3;
    }
    .field__side {
        @apply text-n-3/90;
    }
    input {
        @apply text-n-3;
    }
}

/* VIEW CLEAR */
.field_clear {
    .field__label {
        @apply left-0;
    }
    input {
        @apply px-0 pb-1 pt-3.5;
    }
    .field__side {
        &_prefix {
            @apply left-0 translate-y-1;
            & ~ input {
                @apply !pl-8;
            }
        }
        &_suffix {
            @apply right-0;
            & ~ input {
                @apply !pr-8;
            }
            & ~ .field__label {
                @apply !pr-4;
            }
        }
    }
}
.field_clear.is-filled,
.field_clear.is-focused {
    .field__label {
        @apply max-w-[calc(125%-theme(space.6))] -translate-y-[20px] scale-75;
    }
}
.field_clear.is-disabled {
    .field__label {
        @apply text-n-3;
    }
    .field__side {
        @apply text-n-3/90;
    }
    input {
        @apply text-n-3;
    }
}
